## 4615. 재미있는 오셀로 게임

오셀로라는 게임은 흑돌과 백돌을 가진 사람이 번갈아가며 보드에 돌을 놓아서 최종적으로 보드에 자신의 돌이 많은 사람이 이기는 게임이다.

보드는 4x4, 6x6, 8x8(가로, 세로 길이) 크기를 사용한다. 6x6 보드에서 게임을 할 때, 처음에 플레이어는 다음과 같이 돌을 놓고 시작한다(B : 흑돌, W : 백돌).

4x4, 8x8 보드에서도 동일하게 정가운데에 아래와 같이 배치하고 시작한다.

![img](D3.assets\오셀로1.jpg)

그리고 흑, 백이 번갈아가며 돌을 놓는다.

처음엔 흑부터 시작하는데 이 때 흑이 돌을 놓을 수 있는 곳은 다음과 같이 4군데이다.

![img](D3.assets\오셀로2.jpg)

플레이어는 빈공간에 돌을 놓을 수 있다.

단, 자신이 놓을 돌과 자신의 돌 사이에 상대편의 돌이 있을 경우에만 그 곳에 돌을 놓을 수 있고, 그 때의 상대편의 돌은 자신의 돌로 만들 수 있다.

(여기에서 "사이"란 가로/세로/대각선을 의미한다.)

(2, 3) 위치에 흑돌을 놓은 후의 보드는 다음과 같다.

![img](D3.assets\오셀로3.jpg)

이런 식으로 번갈아가며 흑, 백 플레이어가 돌을 놓는다.

만약 돌을 놓을 곳이 없다면 상대편 플레이어가 다시 돌을 놓는다.

보드에 빈 곳이 없거나 양 플레이어 모두 돌을 놓을 곳이 없으면 게임이 끝나고 그 때 보드에 있는 돌의 개수가 많은 플레이어가 승리하게 된다.


 **[입력]**

첫 번째 줄에 테스트 케이스의 수 T가 주어진다.

각 테스트 케이스의 첫 번째 줄에는 보드의 한 변의 길이 N과 플레이어가 돌을 놓는 횟수 M이 주어진다. N은 4, 6, 8 중 하나이다.

그 다음 M줄에는 돌을 놓을 위치와 돌의 색이 주어진다.

돌의 색이 1이면 흑돌, 2이면 백돌이다.

만약 3 2 1이 입력된다면 (3, 2) 위치에 흑돌을 놓는 것을 의미한다.

돌을 놓을 수 없는 곳은 입력으로 주어지지 않는다.

 **[출력]**

각 테스트 케이스마다 게임이 끝난 후 보드 위의 흑돌, 백돌의 개수를 출력한다.

흑돌이 30개, 백돌이 34인 경우 30 34를 출력한다.

```python
T = int(input())
t = 0
while t < T:
    N, M = map(int, input().split())

    # 오델로 판 초기 모양 잡기
    board = [[0] * N for _ in range(N)]
    center = N // 2

    # 델타 위부터 시계방향
    d_rc = [[-1, 0], [-1, 1], [0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1]]

    # 중앙에 백흑돌 정렬
    for i in range(center - 1, center + 1):
        for j in range(center - 1, center + 1):
            if i == j:
                board[i][j] = 2
            else:
                board[i][j] = 1

    # 흑돌 백돌 놓는 위치 입력
    for i in range(M):
        x, y, c = map(int, input().split())
        x, y = x-1, y-1
        board[x][y] = c

        # 델타 8방향 탐색
        for d in d_rc:
            new_x = x + d[0]
            new_y = y + d[1]

            # 판 밖으로 나가는 애들 나가리
            if new_x < 0 or new_x >= N or new_y < 0 or new_y >= N:
                continue

            # 팔방향 탐색했을 때, 0도 아니고 내 말이 아닌 자리에 대해서
            if board[new_x][new_y] != 0 and board[new_x][new_y] != c:

                # 내 말로 바꿀 애들 탐색
                while True:
                    # 내 말이 아닌 쪽으로 점점 증가
                    new_x += d[0]
                    new_y += d[1]

                    # 끝에 도착했으면 말 위치 초기화
                    if new_x < 0 or new_x >= N or new_y < 0 or new_y >= N:
                        new_x = x
                        new_y = y
                        break

                    # 중간에 0을 만나도 말 위치 초기화
                    elif board[new_x][new_y] == 0:
                        new_x = x
                        new_y = y
                        break
                    
                    # 내 말을 다시 찾으면 초기화 안하고 종료
                    elif board[new_x][new_y] == c:
                        break

                # 새로 생긴 좌표까지 반복하며 내말로 바꾸기
                while x != new_x or y != new_y: # 초기화 되서 나온애들은 걍 반복문 안돌고 끝
                    new_x -= d[0]
                    new_y -= d[1]
                    board[new_x][new_y] = c
    # 흑백돌 갯수
    cnt_w = 0
    cnt_b = 0
    for i in range(N):
        for j in range(N):
            if board[i][j] == 1:
                cnt_b += 1
            elif board[i][j] == 2:
                cnt_w += 1

    print('#{} {} {}'.format(t+1, cnt_b, cnt_w))

    t += 1
```

```
# input
1			// T
4 12		// N, M
1 2 1		// (1, 2)에 흑돌 놓기
1 1 2		//( 1, 1)에 백돌 놓기
4 3 1		
4 4 2
2 1 1
4 2 2
3 4 1
1 3 2
2 4 1
1 4 2
4 1 2
3 1 2

# output
#1 0 16			//첫 번째 케이스의 답
```

